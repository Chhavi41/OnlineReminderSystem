<!DOCTYPE html>
<html>
    <head>
        <title>User Login</title>
        <style>
            body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
            input, select, button { width: 100%; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px; }
        </style>
    </head>
    <body>
        <h1>User Login</h1>
        <div id="msg"></div>
        <form id="login-form">
            <input name="emailId" type="email" placeholder="Email" required /><br/>
            <input name="password" type="password" placeholder="Password" required /><br/>
            <button type="submit">Register</button>
        </form>
        <p>Don't have an account? <a href="register.html">Register</a></p>

        <script type="module">
            import { login } from "./js/api.js";
            import { showMessage } from "./js/utils.js";
        
            const form = document.getElementById("login-form");
            const msg = document.getElementById("msg");
        
            form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const emailId = formData.get("emailId");
            const password = formData.get("password");
            try {
                await login(emailId, password);
                window.location.href = "reminders.html";
            } catch (err) {
                showMessage(msg, "Login failed: " + err.message, "error");
            }
            });
        </script>
    </body>
</html>